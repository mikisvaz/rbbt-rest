%meta{ :charset => "utf-8" }/

%meta(name="viewport" content="width=device-width, initial-scale=1.0")

%link{:rel => "icon", :type => "image/gif", :href => "/favicon.gif"}/

%title= $title

// Semantic-ui


- record_css '/plugins/semantic-ui/dist/semantic.min.css'

- record_css '/plugins/jquery-ui/css/custom-theme/jquery-ui-1.8.14.custom.css'

- record_css '/stylesheets/app'

= serve_css

// Third party frameworks

:javascript
  var user = #{user ? '"' + user + '"' : '"none"'}
  var main_url = window.location.toString();
  var production = #{production? ? "true" : "false"};

-#= link_js "http://cdnjs.cloudflare.com/ajax/libs/mithril/0.1.28/mithril.min.js"

- record_js '/js/defer'
- record_js "/plugins/mithril/js/mithril.js"
- record_js "/plugins/requirejs/js/require.js"
= serve_js

:javascript
  requirejs.config({baseUrl: '/js-find'})


- %w(jquery-2.1.1 jquery.cookie jquery.form).each do |jquery_file|
  - record_js File.join('/plugins/jquery/js/', jquery_file)

- record_js '/plugins/jquery-ui/js/jquery-ui-1.8.14.custom.min.js'
- record_js '/plugins/jquery.tablesorter/jquery.tablesorter.min.js'
- record_js '/plugins/jquery.scrollTo/jquery.scrollTo'
- record_js '/plugins/semantic-ui/dist/semantic.min.js'
- record_js '/plugins/FileSaver/js/FileSaver.js'

- %w(helpers _md5 _ajax_replace _ellipsis).each do |file|
  - record_js "/js-find/#{ file }"

- %w(dom_update workflow fragment menu favourites page_type modal reveal actions table list map hide).each do |file|
  - record_js "/js-find/rbbt/#{ file }"

- %w(dom_update workflow fragment menu favourites page_type modal reveal actions table list map hide).each do |file|
  - record_js "/js-find/rbbt/#{ file }"

- %w(rbbt rbbt.basic rbbt.job rbbt.page rbbt.entity rbbt.entity_list rbbt.entity_map rbbt.views rbbt.favourites rbbt.knowledge_base rbbt.aesthetics rbbt.modal).each do |file|
  - record_js "/js-find/#{ file }"

- record_js "/js-find/app"
